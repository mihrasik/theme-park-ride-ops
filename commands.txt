# run vagrant that creates docker container from Dockerfile
vagrant up --provider=docker

# get insecure key
curl -o insecure_key.pub https://raw.githubusercontent.com/hashicorp/vagrant/main/keys/vagrant.pub

# deleted old fingerpint
ssh-keygen -f '/home/ubuntu/.ssh/known_hosts' -R '[localhost]:2222'

ssh -i ~/.vagrant.d/insecure_private_key -p 2222 vagrant@localhost

 ll  ~/.vagrant.d/insecure_private_key
-rw------- 1 ubuntu ubuntu 1675 Oct 23 16:03 /home/ubuntu/.vagrant.d/insecure_private_key

 curl localhost:5000/ride


curl -s -X POST -H 'Content-Type: application/json' -d '{"name":"Dragon-20251028","description":"Scary","thrillFactor":5,"vomitFactor":4}' http://localhost:5003/ride | python3 -m json.tool

# get inside the database container
docker exec -it mariadb bash
# get inside the database
mariadb -u app -papp

show databases;
use themepark;
show tables;
select * from theme_park_ride;

docker container ls


wget https://download.virtualbox.org/virtualbox/7.2.4/virtualbox-7.2_7.2.4-170995~Ubuntu~noble_amd64.deb

sudo apt install ./virtualbox-7.2_7.2.4-170995~Ubuntu~noble_amd64.deb
sudo usermod -aG vboxusers $USER

# 1. Start the VM (builds images, installs k3s, Terraform, Helm)
vagrant up

# 2. SSH in and run Terraform
vagrant ssh -c "cd /vagrant/terraform && terraform init && terraform apply -auto-approve"

# 3. Access your app
open http://localhost:8088   # → Nginx Ingress → app1/app2/app3

chmod +x build_and_import_docker_images.sh

./build_and_import_docker_images.sh


vagrant ssh

# Inside VM
cd /vagrant/terraform

# First time only
terraform init

# Now apply
terraform apply -auto-approve

sudo systemctl status k3s

kubectl config current-context

kubectl get nodes
NAME       STATUS   ROLES                  AGE   VERSION
k3s-host   Ready    control-plane,master   59m   v1.33.5+k3s1

kubectl get pods -n prod
No resources found in prod namespace.

kubectl get pods -n ingress

curl http://localhost:8088
helm list -n prod

cd /vagrant
helm uninstall dataops -n prod
helm install dataops charts/dataops/ -n prod

